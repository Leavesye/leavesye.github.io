webpackJsonp([27],{DfBP:function(e,t,a){(e.exports=a("BkJT")(!1)).push([e.i,"",""])},NXe2:function(e,t,a){var r=a("DfBP");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("8bSs")("557ac75f",r,!0)},jt5k:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("5VXh"),n=a("0j9R"),i=a("wS1x"),o=a.n(i),s=a("0xDb"),l=a("vLgD");var g={name:"customlabel-edit",components:{CommonForm:n.a,VJstree:o.a},data:function(){return{isLoading:!1,form:{id:"",tagCn:"",tagTypeId:1,tagDefine:"intrange",tagDbDefine:"string",runFlag:"1",tagDescription:"",rule:""},rules:{tagCn:[{required:!0,message:"标签名称不能为空",trigger:"blur"}],tagTypeId:[{required:!0,message:"标签分组不能为空",trigger:"blur"}],tagDefine:[{required:!0,message:"标签类型不能为空",trigger:"blur"}],tagDbDefine:[{required:!0,message:"数据类型不能为空",trigger:"blur"}],runFlag:[{required:!0,message:"计算类型不能为空",trigger:"blur"}]},layoutConfig:{xs:24,sm:12,md:8},formConfig:[{type:1,label:"标签名称",key:"tagCn"},{type:3,label:"标签分组",key:"tagTypeId",options:[]},{type:3,label:"标签类型",key:"tagDefine",options:[]},{type:3,label:"数据类型",key:"tagDbDefine",options:[]},{type:3,label:"计算类型",key:"runFlag",options:[]},{type:2,label:"备注",key:"tagDescription"}],tagTree:[]}},methods:{handleSave:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var a,n=t.$route.params.id;"0"!==n?(t.form.id=n,(a=t.form,Object(l.a)({url:"/segment/userDefined/save",method:"post",data:a})).then(function(e){t.$router.push("/segment/customlabel-list"),r.Message.success("修改成功")})):function(e){return Object(l.a)({url:"/segment/userDefined/save",method:"post",data:e})}(t.form).then(function(e){r.Message.success("保存成功"),t.$router.push("/segment/customlabel-list")})})},loadDetail:function(e){var t,a=this;this.isLoading=!0,(t=e,Object(l.a)({url:"/segment/userDefined/init?tagId="+t,method:"get"})).then(function(e){var t=e.data;a.formConfig[1].options=t.tagTypeSelect,a.formConfig[2].options=t.userDefinedTypeSelect,a.formConfig[3].options=t.tagDbDefineSelect,a.formConfig[4].options=t.ifTotalRunSelect,a.tagTree=Object(s.b)(t.tagTree);var r=t.tag;a.form.rule=t.tagRule.rule,a.form.tagCn=r.tagCn,a.form.tagTypeId=r.tagTypeId,a.form.tagDefine=r.tagDefine,a.form.tagDbDefine=r.tagDbDefine,a.form.runFlag=r.runFlag,a.form.tagDescription=r.tagDescription,a.isLoading=!1}).catch(function(e){a.isLoading=!1})},itemClick:function(e,t){void 0===t.children&&(this.form.rule+=t.name_en)}},mounted:function(){"0"===this.$route.params.id?this.loadDetail(""):this.loadDetail(this.$route.params.id)}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],ref:"form",staticClass:"edit-container",attrs:{model:e.form,rules:e.rules,"label-width":"80px","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading"}},[a("div",{staticClass:"panel"},[a("h4",[e._v("标签规则")]),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xs:24,sm:6,md:6}},[a("div",{staticClass:"tree-box"},[a("v-jstree",{attrs:{data:e.tagTree,"whole-row":"","text-field-name":"name"},on:{"item-click":e.itemClick}})],1)]),e._v(" "),a("el-col",{attrs:{xs:24,sm:18,md:18}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.form.rule,callback:function(t){e.$set(e.form,"rule",t)},expression:"form.rule"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"panel"},[a("h4",[e._v("标签基础信息")]),e._v(" "),a("common-form",{attrs:{formConfig:e.formConfig,layoutConfig:e.layoutConfig,form:e.form}}),e._v(" "),a("el-row",{staticClass:"text-center"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleSave("form")}}},[e._v("确定")]),e._v(" "),a("router-link",{attrs:{to:"/segment/customlabel-list"}},[a("el-button",{attrs:{type:"primary"}},[e._v("取消")])],1)],1)],1)])},staticRenderFns:[]};var f=a("vSla")(g,u,!1,function(e){a("NXe2")},"data-v-d1b52b00",null);t.default=f.exports}});