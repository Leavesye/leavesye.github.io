webpackJsonp([6],{CtAK:function(n,e,s){(n.exports=s("BkJT")(!1)).push([n.i,"\n.process-design {\n  background-color: #fff;\n  padding: 15px;\n  margin: 15px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  position: relative;\n}\n.process-design .left-step {\n    -ms-flex-preferred-size: 45%;\n        flex-basis: 45%;\n    top: 0;\n    bottom: 0;\n    margin: auto;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n}\n.process-design .left-step .step-main {\n      -ms-flex-preferred-size: 60%;\n          flex-basis: 60%;\n}\n.process-design .left-step .line {\n      -ms-flex-preferred-size: 40%;\n          flex-basis: 40%;\n      height: 8px;\n      background: #11b1db;\n      margin-top: 16px;\n}\n.process-design .node-btn {\n    background: #fff;\n    border-radius: 50%;\n    border: 1px solid #ebeef5;\n    -webkit-box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n            box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n    height: 40px;\n    line-height: 40px;\n    text-align: center;\n    width: 40px;\n    font-size: 20px;\n}\n.process-design .right-branch {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-preferred-size: 55%;\n        flex-basis: 55%;\n}\n.process-design .right-branch .dotted-line {\n      -webkit-box-flex: 1;\n          -ms-flex: 1;\n              flex: 1;\n      position: relative;\n      margin-top: 16px;\n      margin-right: 20px;\n      border-top: 8px dotted #11b1db5c;\n}\n.process-design .right-branch .dotted-line .plus-node {\n        position: absolute;\n        left: -20px;\n        bottom: 0px;\n}\n.process-design .right-branch .dotted-line .end-node {\n        position: absolute;\n        right: -20px;\n        bottom: 0px;\n}\n.process-design .right-branch .box-l,\n    .process-design .right-branch .box-r {\n      margin-top: 16px;\n      margin-bottom: 16px;\n      border-top: 8px solid #11b1db;\n      border-bottom: 8px solid #11b1db;\n      position: relative;\n}\n.process-design .right-branch .box-l .icon-container,\n      .process-design .right-branch .box-r .icon-container {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        margin: auto;\n}\n.process-design .right-branch .box-l .icon-container.left,\n      .process-design .right-branch .box-r .icon-container.left {\n        left: -24px;\n}\n.process-design .right-branch .box-l .icon-container.right,\n      .process-design .right-branch .box-r .icon-container.right {\n        right: -24px;\n}\n.process-design .right-branch .box-l {\n      border-left: 8px solid #11b1db;\n      border-top-left-radius: 30px;\n      border-bottom-left-radius: 30px;\n      width: 60px;\n}\n.process-design .right-branch .box-r {\n      border-right: 8px solid #11b1db;\n      border-top-right-radius: 30px;\n      border-bottom-right-radius: 30px;\n      width: 30px;\n}\n.process-design .right-branch .box-sides-item {\n      border-top: 8px solid #11b1db;\n}\n.process-design .right-branch .branch-nonodes {\n      height: 40px;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      position: relative;\n}\n.process-design .right-branch .branch-nonodes .branch-left,\n      .process-design .right-branch .branch-nonodes .branch-right {\n        width: 50%;\n        -webkit-box-flex: 1;\n            -ms-flex: 1;\n                flex: 1;\n        margin-bottom: 16px;\n}\n.process-design .right-branch .branch-nonodes .branch-left {\n        border-bottom: 8px solid #11b1db;\n}\n.process-design .right-branch .branch-nonodes .branch-right {\n        border-bottom: 8px dotted #11b1db5c;\n}\n.process-design .right-branch .branch-nonodes .plus-node {\n        position: absolute;\n        left: 0;\n        right: 0;\n        margin: 0 auto;\n}\n.process-design .right-branch .box-c {\n      -webkit-box-flex: 1;\n          -ms-flex: 1;\n              flex: 1;\n}\n.process-design .right-branch .box-c .branch-line {\n        margin-bottom: 20px;\n}\n.process-design .right-branch .box-c .branch-line:last-child {\n          margin-bottom: 0px;\n}\n",""])},DekB:function(n,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t={name:"process-node",props:{branchIndex:{type:Number},nodes:{type:Array},item:{type:Object}}},o={render:function(){var n=this,e=n.$createElement,s=n._self._c||e;return s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:n.item.content,placement:"top"}},[n.item.btns?s("el-popover",{attrs:{placement:"bottom",trigger:"click"}},[n._l(n.item.btns,function(e,t){return s("div",{staticClass:"funcs-item",on:{click:function(s){e.cb(n.nodes,n.item,e,n.branchIndex)}}},[s("svg-icon",{attrs:{"icon-class":e.icon}}),n._v(" "+n._s(e.content)+"\n    ")],1)}),n._v(" "),s("svg-icon",{staticClass:"node-icon-color",attrs:{slot:"reference","icon-class":n.item.icon},slot:"reference"})],2):n._e(),n._v(" "),n.item.flowCtrl?s("el-popover",{attrs:{placement:"bottom",trigger:"click"}},[s("div",{staticClass:"funcs-box"},[s("div",{staticClass:"funcs-btn-l"},n._l(n.item.flowCtrl,function(e){return s("div",{staticClass:"funcs-item",on:{click:function(s){e.cb(n.nodes,n.item,e,n.branchIndex)}}},[s("svg-icon",{attrs:{"icon-class":e.icon}}),n._v(" "+n._s(e.content)+"\n        ")],1)})),n._v(" "),s("div",{staticClass:"funcs-btn-r"},n._l(n.item.nodeCtrl,function(e){return s("div",{staticClass:"funcs-item",on:{click:function(s){e.cb(n.nodes,n.item,e,n.branchIndex)}}},[s("svg-icon",{attrs:{"icon-class":e.icon}}),n._v(" "+n._s(e.content)+"\n        ")],1)}))]),n._v(" "),s("svg-icon",{staticClass:"node-icon-color",attrs:{slot:"reference","icon-class":n.item.icon},slot:"reference"})],1):n._e(),n._v(" "),n.item.btns?n._e():s("svg-icon",{staticClass:"node-icon-color",attrs:{"icon-class":n.item.icon}})],1)},staticRenderFns:[]};var c=s("vSla")(t,o,!1,function(n){s("Teag")},null,null).exports,i={name:"arvato-steps",props:{nodes:{type:Array},branchIndex:{type:Number}},components:{ProcessNode:c},data:function(){return{}},methods:{}},r={render:function(){var n=this,e=n.$createElement,s=n._self._c||e;return s("el-steps",{staticClass:"process-steps"},n._l(n.nodes,function(e,t){return s("el-step",{key:t},[s("template",{slot:"icon"},[s("process-node",{attrs:{item:e,nodes:n.nodes,branchIndex:n.branchIndex}})],1)],2)}))},staticRenderFns:[]};var a={name:"process-design",components:{ArvatoSteps:s("vSla")(i,r,!1,function(n){s("OQ6e")},null,null).exports,ProcessNode:c},data:function(){return{plusNode:{icon:"process_plus",content:"插入步骤",btns:[{icon:"process_filter",content:"过滤",cb:this.handleAddNode},{icon:"process_wait",content:"等待",cb:this.handleAddNode},{icon:"process_abtest",content:"AB Test",cb:this.handleAddNode},{icon:"process_branch",content:"分支",cb:this.handleAddNode}]},branchNode:{icon:"process_branch",content:"分支",btns:[{icon:"process_delete",content:"删除节点",cb:""},{icon:"process_plus",content:"添加分支",cb:""}]},stopNode:{icon:"process_stop",content:"结束"},nodeFuncs:[{icon:"process_edit",content:"编辑",cb:this.handleEditNode},{icon:"process_delete",content:"删除",cb:this.handleDeleteNode}],process:{nodes:[{icon:"process_start",content:"开始"},{icon:"process_time",content:"时间波次",btns:[{icon:"process_edit",content:"编辑",cb:this.handleEditNode},{icon:"process_delete",content:"删除",cb:this.handleDeleteNode}]},{icon:"process_peoples",content:"人群",btns:[{icon:"process_edit",content:"编辑",cb:this.handleEditNode},{icon:"process_delete",content:"删除",cb:this.handleDeleteNode}]}],branchs:[{nodes:[{icon:"process_plus",content:"插入步骤",btns:[{icon:"process_filter",content:"过滤",cb:this.handleAddNode},{icon:"process_wait",content:"等待",cb:this.handleAddNode},{icon:"process_abtest",content:"AB Test",cb:this.handleAddNode},{icon:"process_branch",content:"分支",cb:this.handleAddNode}]}]}]}}},methods:{getSidesItemStyle:function(n){return 0==this.process.branchs[n+1].nodes.length?{borderTop:"8px dotted #11b1db5c",marginLeft:"8px"}:{borderTop:"8px solid #11b1db"}},openLayerByType:function(){},handleAddBranch:function(n){n.push({nodes:[{icon:"process_plus",content:"插入步骤",flowCtrl:[{icon:"process_filter",content:"过滤",cb:""},{icon:"process_wait",content:"等待",cb:""},{icon:"process_abtest",content:"AB Test",cb:""},{icon:"process_branch",content:"分支",cb:""}],nodeCtrl:[{icon:"process_sms",content:"短信",cb:""},{icon:"process_mail",content:"邮件",cb:""},{icon:"process_wechat",content:"微信",cb:""},{icon:"process_mss",content:"彩信",cb:""},{icon:"process_qiumei",content:"逑美",cb:""},{icon:"process_counter",content:"专柜",cb:""},{icon:"process_tag",content:"设置标签",cb:""},{icon:"process_media",content:"媒体投放",cb:""},{icon:"process_point",content:"积分",cb:""},{icon:"process_coupon",content:"优惠券",cb:""},{icon:"process_coupon_send",content:"优惠券发送",cb:""},{icon:"process_coupon_effective",content:"优惠券生效",cb:""},{icon:"process_coupon_expired",content:"优惠券过期",cb:""}]},{icon:"process_branch",content:"分支"},{icon:"process_peoples",content:"人群"},{icon:"process_time",content:"时间波次"},{icon:"process_mail",content:"分支"},{icon:"process_stop",content:"结束"}]})},handleDeleteBranch:function(n){this.process.branchs.splice(n,1)},handleAddNode:function(n,e,s){var t=this.process.branchs;if(1==t.length&&1==t[0].nodes.length)n.push({icon:s.icon,content:s.content,btns:this.nodeFuncs}),n.push({icon:"process_stop",content:"结束"});else if(1==t.length){var o=n.pop();n.push({icon:s.icon,content:s.content,btns:this.nodeFuncs}),n.push(o)}else n.push({icon:s.icon,content:s.content,btns:this.nodeFuncs})},handleEditNode:function(n){this.openLayerByType(n)},handleDeleteNode:function(n,e,s){if(1==this.process.branchs.length&&3==n.length)this.process.branchs[0].nodes=[n[0]];else{var t=0;_.each(n,function(n,s){n.content==e.content&&(t=s)}),n.splice(t,1)}}}},d={render:function(){var n=this,e=n.$createElement,s=n._self._c||e;return s("div",[s("div",{staticClass:"process-design"},[s("div",{staticClass:"left-step"},[s("arvato-steps",{staticClass:"step-main",attrs:{nodes:n.process.nodes}}),n._v(" "),s("div",{staticClass:"line"})],1),n._v(" "),s("div",{staticClass:"right-branch"},[1==n.process.branchs[0].nodes.length&&1==n.process.branchs.length?s("div",{staticClass:"dotted-line"},[s("div",{staticClass:"plus-node node-btn"},[s("process-node",{attrs:{item:n.process.branchs[0].nodes[0],nodes:n.process.branchs[0].nodes,branchs:n.process.branchs}})],1),n._v(" "),s("div",{staticClass:"end-node node-btn"},[s("process-node",{attrs:{item:n.stopNode}})],1)]):n._e(),n._v(" "),1==n.process.branchs.length&&n.process.branchs[0].nodes.length>1?s("arvato-steps",{staticStyle:{flex:"1"},attrs:{nodes:n.process.branchs[0].nodes}}):n._e(),n._v(" "),n.process.branchs.length>1?s("div",{staticClass:"box-l"},[n._l(new Array(n.process.branchs.length-2),function(n,e){return s("div",{key:e,staticClass:"box-sides-item",staticStyle:{"margin-top":"52px"}})}),n._v(" "),s("div",{staticClass:"icon-container node-btn left"},[s("process-node",{attrs:{item:n.branchNode}})],1)],2):n._e(),n._v(" "),n.process.branchs.length>1?s("div",{staticClass:"box-c"},n._l(n.process.branchs,function(e,t){return s("div",{key:t,staticClass:"branch-line"},[e.nodes.length?s("arvato-steps",{attrs:{nodes:e.nodes}}):n._e(),n._v(" "),e.nodes.length?n._e():s("div",{staticClass:"branch-nonodes"},[s("div",{staticClass:"branch-left"}),n._v(" "),s("div",{staticClass:"branch-right"}),n._v(" "),s("div",{staticClass:"plus-node node-btn"},[s("process-node",{attrs:{item:n.plusNode,branchs:n.process.branchs,branchIndex:t}})],1)])],1)})):n._e(),n._v(" "),n.process.branchs.length>1?s("div",{staticClass:"box-r"},[n._l(new Array(n.process.branchs.length-2),function(e,t){return s("div",{key:t,staticClass:"box-sides-item",staticStyle:{"margin-top":"52px"},style:n.getSidesItemStyle(t)})}),n._v(" "),s("div",{staticClass:"icon-container node-btn right"},[s("process-node",{attrs:{item:n.stopNode}})],1)],2):n._e()],1)])])},staticRenderFns:[]};var p={name:"active-edit",components:{ProcessDesign:s("vSla")(a,d,!1,function(n){s("yHeL")},null,null).exports}},l={render:function(){var n=this.$createElement;return(this._self._c||n)("process-design")},staticRenderFns:[]};var b=s("vSla")(p,l,!1,function(n){s("nzTT")},null,null);e.default=b.exports},H2Gi:function(n,e,s){(n.exports=s("BkJT")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},KsgU:function(n,e,s){(n.exports=s("BkJT")(!1)).push([n.i,"\n.process-steps {\n  height: 40px;\n}\n.process-steps .el-step.is-horizontal .el-step__line {\n    border-top: 8px solid #11b1db;\n    top: 16px;\n    left: 2px;\n    right: 0;\n}\n.process-steps .el-step__icon {\n    border-radius: 50%;\n    border: 1px solid #ebeef5;\n    -webkit-box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n            box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n    height: 40px;\n    width: 40px;\n    font-size: 20px;\n}\n.funcs-box {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.funcs-box .funcs-btn-l {\n    padding-right: 10px;\n}\n.funcs-box .funcs-btn-r {\n    padding-left: 10px;\n    padding-right: 5px;\n    border-left: 1px solid #ebeef5;\n    max-height: 100px;\n    overflow: auto;\n}\n.funcs-item {\n  margin-bottom: 5px;\n  cursor: pointer;\n}\n.funcs-item:hover {\n    color: #0075b3;\n}\n",""])},OQ6e:function(n,e,s){var t=s("KsgU");"string"==typeof t&&(t=[[n.i,t,""]]),t.locals&&(n.exports=t.locals);s("8bSs")("771bca60",t,!0)},Teag:function(n,e,s){var t=s("oqG4");"string"==typeof t&&(t=[[n.i,t,""]]),t.locals&&(n.exports=t.locals);s("8bSs")("34237fe4",t,!0)},nzTT:function(n,e,s){var t=s("H2Gi");"string"==typeof t&&(t=[[n.i,t,""]]),t.locals&&(n.exports=t.locals);s("8bSs")("ffaa9bce",t,!0)},oqG4:function(n,e,s){(n.exports=s("BkJT")(!1)).push([n.i,"\n.node-icon-color {\n  color: #0075b3;\n}\n.funcs-box {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.funcs-box .funcs-btn-l {\n    padding-right: 10px;\n}\n.funcs-box .funcs-btn-r {\n    padding-left: 10px;\n    padding-right: 5px;\n    border-left: 1px solid #ebeef5;\n    max-height: 100px;\n    overflow: auto;\n}\n.funcs-item {\n  margin-bottom: 5px;\n  cursor: pointer;\n}\n.funcs-item:hover {\n    color: #0075b3;\n}\n",""])},yHeL:function(n,e,s){var t=s("CtAK");"string"==typeof t&&(t=[[n.i,t,""]]),t.locals&&(n.exports=t.locals);s("8bSs")("6f5b9c18",t,!0)}});