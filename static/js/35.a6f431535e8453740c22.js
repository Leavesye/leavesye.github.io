webpackJsonp([35],{"3gKa":function(e,t,n){(e.exports=n("BkJT")(!1)).push([e.i,"\n.system-menu[data-v-08f4679e] {\n  padding: 10px;\n}\n.system-menu .menu-card[data-v-08f4679e] {\n    height: 500px;\n    overflow: auto;\n}\n",""])},Pjhh:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("vLgD"),s=n("TIfe");var i=n("0j9R"),a=n("0xDb"),r=n("Y0Uy"),d=n.n(r),c=n("wS1x"),l=n.n(c),m={name:"system-org",data:function(){return{btns:[{text:"添加",icon:"el-icon-circle-plus",cb:this.handleAdd,isShow:!0},{text:"编辑",icon:"el-icon-edit",cb:this.handleEdit,isShow:!1},{text:"取消",icon:"el-icon-close",cb:this.handleCancel,isShow:!0},{text:"删除",icon:"el-icon-delete",cb:this.handleDelete,isShow:!1}],formConfig:[{type:1,label:"部门名称",key:"name"},{type:5,label:"所属部门",key:"belong",data:[],cb:this.handleSelectTree},{type:1,label:"显示顺序",key:"orderNum"}],form:{name:"",belong:"",pId:"",orderNum:""},layoutConfig:{xs:24,sm:24,md:24},tree:{leftTree:[],chooseItem:null},isLoading:!1,currentId:"",selectPid:""}},components:{CommonForm:i.a,VJstree:l.a},methods:{resetForm:function(){this.form={name:"",belong:"",pId:0,orderNum:""}},toggleAdd:function(){this.btns[0].isShow=!0,this.btns[1].isShow=!1,this.btns[3].isShow=!1,this.resetForm()},handleAdd:function(){var e,t=this;this.currentId="",(e=this.form,Object(o.a)({url:"/admin/dept/depts",method:"post",data:e})).then(function(){t.$message({type:"success",message:"添加成功"}),t.resetForm(),t.loadData()})},handleEdit:function(){var e,t,n=this;(e=this.currentId,t=this.form,Object(o.a)({url:"/admin/dept/depts/"+e+"?token="+Object(s.a)(),method:"put",data:t})).then(function(){n.$message({type:"success",message:"修改成功"}),n.loadData()})},handleCancel:function(){this.btns[0].isShow=!0,this.btns[1].isShow=!1,this.btns[3].isShow=!1,this.resetForm()},handleDelete:function(){var e=this;this.$confirm("删除菜单会删除与该菜单相关联的数据，确定要删除吗？","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t;(t=e.currentId,Object(o.a)({url:"/admin/dept/depts/"+t+"?token="+Object(s.a)(),method:"delete"})).then(function(){e.resetForm(),e.loadData(),e.$message({type:"success",message:"删除成功!"})})}).catch(function(){})},handleSelectTree:function(e,t){this.form.pId=t.id,this.form.belong=t.name},itemClick:function(e,t){var n,s=this;this.currentId=t.id,this.btns[0].isShow=!1,this.btns[1].isShow=!0,this.btns[3].isShow=!0,(n=t.id,Object(o.a)({url:"/admin/dept/depts/"+n,method:"get"})).then(function(e){var t=e.deptInfo;s.form.name=t.name;var n=d.a.find(e.deptTree,function(e){return e.id===t.pId});s.form.belong=n?n.name:"",s.form.orderNum=t.orderNum||""}),this.tree.chooseItem=t},loadData:function(){var e=this;return this.isLoading=!0,Object(o.a)({url:"/admin/dept/init",method:"get"}).then(function(t){var n=Object(a.b)(t);e.tree.leftTree=n,e.formConfig[1].data=d.a.cloneDeep(n),e.isLoading=!1}).catch(function(t){console.log(t),e.isLoading=!1})}},mounted:function(){this.loadData()}},h={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",{staticClass:"system-menu",attrs:{gutter:20}},[n("el-col",{attrs:{xs:24,sm:8,md:8}},[n("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"menu-card",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("部门列表")]),e._v(" "),n("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.toggleAdd}},[e._v("新增部门")])],1),e._v(" "),n("v-jstree",{attrs:{data:e.tree.leftTree,"whole-row":"","text-field-name":"name"},on:{"item-click":e.itemClick}})],1)],1),e._v(" "),n("el-col",{attrs:{xs:24,sm:16,md:16}},[n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[n("common-form",{attrs:{formConfig:e.formConfig,layoutConfig:e.layoutConfig,form:e.form}})],1),e._v(" "),e._l(e.btns,function(t){return t.isShow?n("el-button",{key:t.text,attrs:{type:"primary",icon:t.icon},on:{click:t.cb}},[e._v(e._s(t.text))]):e._e()})],2)],1)},staticRenderFns:[]};var u=n("vSla")(m,h,!1,function(e){n("vb43")},"data-v-08f4679e",null);t.default=u.exports},vb43:function(e,t,n){var o=n("3gKa");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n("8bSs")("568878fc",o,!0)}});