webpackJsonp([25],{ED5N:function(e,t,n){(e.exports=n("BkJT")(!1)).push([e.i,"",""])},OuAp:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("rVsN"),i=n.n(a),c=n("bLzv"),s=n("dizt"),o=n("0xDb"),r=n("nFx2"),l=n("Y0Uy"),d=n.n(l),h=n("2sCs"),m=n.n(h),u={name:"member-list",components:{ListPage:r.a},data:function(){return{pc:{search:{form:{memberCode:"",memberName:"",mobile:"",gender:"",memberGrade:"",status:"",sort:"id",order:"desc",offset:0,limit:10,menuId:18},layoutConfig:{xs:24,sm:12,md:8},formConfig:[{type:1,label:"会员号",key:"memberCode"},{type:1,label:"会员姓名",key:"memberName"},{type:1,label:"手机号",key:"mobile"},{type:3,label:"性别",key:"gender",options:[]},{type:3,label:"会员等级",key:"memberGrade",options:[]},{type:3,label:"状态",key:"status",options:[]}],btns:[{text:"搜索",cb:this.handleSearch}]},functions:{checkList:["会员号","会员姓名","手机号","性别","状态","会员等级"],handleExpandAll:this.handleExpandAll,rightBtns:[{text:"添加",icon:"el-icon-circle-plus",cb:this.handleAdd},{text:"编辑",icon:"el-icon-edit",cb:this.handleEdit},{text:"删除",icon:"el-icon-delete",cb:this.handleDelete},{text:"详情",icon:"el-icon-tickets",cb:this.handleTurnToDetail}]},table:{dataList:[],handleSelectRow:this.handleSelectRow,selectedRow:null,isLoading:!1,expandAll:!1,thead:[{text:"id",field:"id",hidden:!0},{text:"会员号",field:"member_code",hidden:!1},{text:"会员姓名",field:"name",hidden:!1},{text:"手机号",field:"mobile",hidden:!1},{text:"性别",field:"sex_name",hidden:!1},{text:"状态",field:"status_name",hidden:!1},{text:"会员等级",field:"grade_name",hidden:!1}]},pagination:{pageSizes:[10,25,50,100],pageSize:10,handleSizeChange:this.handleSizeChange,handleCurrentChange:this.handleCurrentChange,currentPage:1,total:0}}}},watch:{"pc.functions.checkList":function(e){d.a.each(this.pc.table.thead,function(t){var n=!1;d.a.each(e,function(e){t.text==e&&(t.hidden=!1,n=!0)}),n||(t.hidden=!0)})}},methods:{test:function(){m.a.get("https://leavesye.github.io/").then(function(e){console.log(e,1111111111)})},handleSearch:function(){this.loadData()},handleSizeChange:function(e){this.pc.search.form.limit=e,this.pc.search.form.offset=this.pc.search.form.limit*(this.pc.pagination.currentPage-1),this.loadData()},handleCurrentChange:function(e){this.pc.pagination.currentPage=e,this.pc.search.form.offset=this.pc.search.form.limit*(this.pc.pagination.currentPage-1),this.loadData()},handleSelectRow:function(e){this.pc.table.selectedRow=e},handleExpandAll:function(){console.log("aaaaaa"),this.pc.table.expandAll=!this.pc.table.expandAll},handleAdd:function(){this.$router.push("/member/member-edit/0")},handleEdit:function(){if(!this.pc.table.selectedRow)return this.$message({type:"warning",message:"请先选中表格中的某一记录！"}),!1;this.$router.push("/member/member-edit/"+this.pc.table.selectedRow.id)},handleDelete:function(){var e=this;if(!this.pc.table.selectedRow)return this.$message({type:"warning",message:"请先选中表格中的某一记录！"}),!1;this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(c.b)({memberId:e.pc.table.selectedRow.id}).then(function(){e.loadData(),e.$message({type:"success",message:"删除成功!"})})}).catch(function(){})},handleTurnToDetail:function(){if(!this.pc.table.selectedRow)return this.$message({type:"warning",message:"请先选中表格中的某一记录！"}),!1;this.$router.push("/member/member-detail/"+this.pc.table.selectedRow.id)},loadData:function(){var e=this;return this.pc.table.isLoading=!0,Object(c.d)(this.pc.search.form).then(function(t){var n=t;e.pc.table.dataList=Object(o.a)(n.rows),e.pc.pagination.total=n.total,e.pc.table.isLoading=!1}).catch(function(t){console.log(t),e.pc.table.isLoading=!1})},getOptions:function(){var e=this;return Object(c.e)().then(function(t){var n=t.data;e.pc.search.formConfig[3].options=n.genderSelect,e.pc.search.formConfig[4].options=n.gradeSelect,e.pc.search.formConfig[5].options=n.statusSelect}).catch(function(e){console.log(e)})},getBtns:function(){var e=this;return Object(s.a)(18).then(function(t){var n=t.data,a=d.a.clone(e.pc.functions.rightBtns);d.a.each(n,function(e){d.a.find(a,function(t){return t.text===e.name})||a.push({text:e.name,icon:e.icon,cb:function(){}})}),a=d.a.filter(a,function(e){return d.a.find(n,function(t){return e.text==t.name})}),e.pc.functions.rightBtns=a})}},mounted:function(){i.a.all([this.loadData(),this.getOptions(),this.getBtns()])}},f={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"member-container"},[t("div",{on:{click:this.test}},[this._v("test")]),this._v(" "),t("list-page",{attrs:{pc:this.pc}})],1)},staticRenderFns:[]};var p=n("vSla")(u,f,!1,function(e){n("j9jq")},"data-v-aa56125c",null);t.default=p.exports},bLzv:function(e,t,n){"use strict";t.d=function(e){return Object(a.a)({url:"/member/member/query",method:"get",params:e})},t.e=function(e){return Object(a.a)({url:"/member/member/init",method:"get",params:e})},t.c=function(e){return Object(a.a)({url:"/member/member/detail",method:"get",params:e})},t.a=function(e){return Object(a.a)({url:"/member/member/save",method:"post",data:e})},t.f=function(e){return Object(a.a)({url:"/member/member/update",method:"post",data:e})},t.b=function(e){return Object(a.a)({url:"/member/member/delete",method:"post",data:e})};var a=n("vLgD")},j9jq:function(e,t,n){var a=n("ED5N");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("8bSs")("6dbc6302",a,!0)}});