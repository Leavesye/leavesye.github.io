webpackJsonp([19],{FtkE:function(e,t,i){"use strict";t.e=function(){return Object(a.a)({url:"/admin/menu/system/permission/buttons/299",method:"get"})},t.d=function(e){return Object(a.a)({url:"/admin/dict/dicts",method:"get",params:e})},t.a=function(e){return Object(a.a)({url:"/admin/dict/dicts",method:"post",data:e})},t.f=function(e){return Object(a.a)({url:"/admin/dict/dicts/"+e.id+"?token="+Object(n.a)(),method:"put",data:e})},t.b=function(e){return Object(a.a)({url:"/admin/dict/dicts/"+e+"?token="+Object(n.a)(),method:"delete"})},t.c=function(e){return Object(a.a)({url:"/admin/dict/dicts/"+e+"?token="+Object(n.a)(),method:"get"})};var a=i("vLgD"),n=i("TIfe")},Os19:function(e,t,i){"use strict";(function(e){var a=i("rVsN"),n=i.n(a),o=i("FtkE"),s=i("0xDb"),d=i("nFx2"),l=i("0j9R"),c=i("Y0Uy"),r=i.n(c),h=i("1fno");t.a={name:"system-dictlist",components:{ListPage:d.a,CommonForm:l.a},data:function(){return{type:1,showEdit:!1,editLayerIndex:0,editForm:{id:"",tableName:"",field:"",fieldName:"",text:"",value:"",sort:""},layoutConfig:{xs:24,sm:24,md:24},formConfig:[{type:1,label:"表名",key:"tableName"},{type:1,label:"列名",key:"field"},{type:1,label:"列描述",key:"fieldName"},{type:1,label:"字典文本值",key:"text"},{type:1,label:"字典值",key:"value"},{type:1,label:"排序",key:"sort"}],rules:{tableName:[{required:!0,message:"表名不能为空",trigger:"blur"}],field:[{required:!0,message:"列名不能为空",trigger:"blur"}],fieldName:[{required:!0,message:"列描述不能为空",trigger:"blur"}],text:[{required:!0,message:"字典文本值不能为空",trigger:"blur"}],value:[{required:!0,message:"字典值不能为空",trigger:"blur"}]},pc:{search:{form:{text:"",value:"",fieldName:"",sort:"",order:"desc",offset:0,limit:10},layoutConfig:{xs:24,sm:12,md:8},formConfig:[{type:1,label:"字典名称",key:"text"},{type:1,label:"字典值",key:"value"},{type:1,label:"类别名称",key:"fieldName"}],btns:[{text:"搜索",cb:this.handleSearch}]},functions:{checkList:["字典名称","字典值","字典类别","表名","列名","创建日期","排序"],handleExpandAll:this.handleExpandAll,rightBtns:[{text:"添加",icon:"el-icon-circle-plus",cb:this.handleAdd},{text:"编辑",icon:"el-icon-edit",cb:this.handleEdit},{text:"删除",icon:"el-icon-delete",cb:this.handleDelete}]},table:{dataList:[],handleSelectRow:this.handleSelectRow,selectedRow:null,isLoading:!1,expandAll:!1,thead:[{text:"字典名称",field:"text",hidden:!1},{text:"字典值",field:"value",hidden:!1},{text:"字典类别",field:"fieldName",hidden:!1},{text:"表名",field:"tableName",hidden:!1},{text:"列名",field:"field",hidden:!1},{text:"创建日期",field:"createDate",hidden:!1},{text:"排序",field:"sort",hidden:!1}]},pagination:{pageSizes:[10,25,50,100],pageSize:10,handleSizeChange:this.handleSizeChange,handleCurrentChange:this.handleCurrentChange,currentPage:1,total:0}}}},watch:{"pc.functions.checkList":function(e){r.a.each(this.pc.table.thead,function(t){var i=!1;r.a.each(e,function(e){t.text==e&&(t.hidden=!1,i=!0)}),i||(t.hidden=!0)})}},methods:{handleSearch:function(){this.loadData()},handleSizeChange:function(e){this.pc.search.form.limit=e,this.pc.search.form.offset=this.pc.search.form.limit*(this.pc.pagination.currentPage-1),this.loadData()},handleCurrentChange:function(e){this.pc.pagination.currentPage=e,this.pc.search.form.offset=this.pc.search.form.limit*(this.pc.pagination.currentPage-1),this.loadData()},handleSelectRow:function(e){this.pc.table.selectedRow=e,console.log(e)},handleExpandAll:function(){this.pc.table.expandAll=!this.pc.table.expandAll},handleAdd:function(){this.type=1,this.showEdit=!0,this.editLayerIndex=h.a.open({type:1,title:"添加字典",area:["800px","500px"],content:e("#edit-dict")})},handleEdit:function(){var t=this;if(!this.pc.table.selectedRow)return this.$message({type:"warning",message:"请先选中表格中的某一记录！"}),!1;this.type=2,this.showEdit=!0,this.editForm.id=this.pc.table.selectedRow.id,Object(o.c)(this.editForm.id).then(function(e){var i=e.dictInfo;t.editForm.tableName=i.tableName,t.editForm.fieldName=i.fieldName,t.editForm.field=i.field,t.editForm.text=i.text,t.editForm.sort=i.sort,t.editForm.value=i.value}),this.editLayerIndex=h.a.open({type:1,title:"编辑字典",area:["800px","500px"],content:e("#edit-dict")})},resetEditForm:function(){this.editForm={id:"",tableName:"",field:"",fieldName:"",text:"",value:"",sort:""}},handleCloseEdit:function(){h.a.close(this.editLayerIndex)},handleSave:function(){var e=this;this.$refs.editForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;1==e.type?Object(o.a)(e.editForm).then(function(){e.$message({type:"success",message:"添加成功"}),e.handleCloseEdit(),e.loadData(),e.resetEditForm()}):Object(o.f)(e.editForm).then(function(){e.$message({type:"success",message:"修改成功"}),e.resetEditForm(),e.handleCloseEdit(),e.loadData()})})},handleDelete:function(){var e=this;if(!this.pc.table.selectedRow)return this.$message({type:"warning",message:"请先选中表格中的某一记录！"}),!1;this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.b)(e.pc.table.selectedRow.id).then(function(){e.loadData(),e.$message({type:"success",message:"删除成功!"})})}).catch(function(){})},loadData:function(){var e=this;return this.pc.table.isLoading=!0,Object(o.d)(this.pc.search.form).then(function(t){console.log(t);var i=t;e.pc.table.dataList=Object(s.a)(i.rows),e.pc.pagination.total=i.total,e.pc.table.isLoading=!1}).catch(function(t){console.log(t),e.pc.table.isLoading=!1})},getBtns:function(){var e=this;return Object(o.e)().then(function(t){var i=t.data,a=r.a.clone(e.pc.functions.rightBtns);r.a.each(i,function(e){r.a.find(a,function(t){return t.text===e.name})||a.push({text:e.name,icon:e.icon,cb:function(){}})}),a=r.a.filter(a,function(e){return r.a.find(i,function(t){return e.text==t.name})}),e.pc.functions.rightBtns=a})}},mounted:function(){n.a.all([this.loadData(),this.getBtns()])}}}).call(t,i("L7Pj"))},fiTo:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("Os19"),n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("list-page",{attrs:{pc:e.pc}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.showEdit,expression:"showEdit"}],attrs:{id:"edit-dict"}},[i("el-form",{ref:"editForm",staticClass:"edit-form",attrs:{"label-position":"left","label-width":"100px",model:e.editForm,rules:e.rules}},[i("common-form",{attrs:{formConfig:e.formConfig,layoutConfig:e.layoutConfig,form:e.editForm}}),e._v(" "),i("el-row",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleSave()}}},[e._v("确定")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.handleCloseEdit}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var o=function(e){i("qf1b")},s=i("vSla")(a.a,n,!1,o,"data-v-31cdcd0a",null);t.default=s.exports},qf1b:function(e,t,i){var a=i("wEFc");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i("8bSs")("92efdfe4",a,!0)},wEFc:function(e,t,i){(e.exports=i("BkJT")(!1)).push([e.i,"\n.edit-form[data-v-31cdcd0a] {\n  margin: 20px;\n}\n",""])}});