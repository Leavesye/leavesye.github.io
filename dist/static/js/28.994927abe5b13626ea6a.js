webpackJsonp([28],{B7ww:function(e,t,n){(e.exports=n("BkJT")(!1)).push([e.i,"",""])},DXCE:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("rVsN"),i=n.n(a),c=n("vLgD");var o=n("5VXh"),s=n("dizt"),l=n("0xDb"),r=n("nFx2"),d=n("Y0Uy"),h=n.n(d),f={name:"customlabel-list",components:{ListPage:r.a},data:function(){return{pc:{search:{form:{tagName:"",tagType:"",tagDefine:"",tagDbDefine:"",runFlag:"",status:"",sort:"id",order:"desc",offset:0,limit:10,menuId:119},layoutConfig:{xs:24,sm:12,md:6},formConfig:[{type:1,label:"标签名称",key:"tagName"},{type:3,label:"标签分组",key:"tagType",options:[]},{type:3,label:"标签类型",key:"tagDefine",options:[]},{type:3,label:"数据类型",key:"tagDbDefine",options:[]},{type:3,label:"计算类型",key:"runFlag",options:[]}],btns:[{text:"搜索",cb:this.handleSearch}]},functions:{checkList:["标签名称","标签分组","标签类型","数据类型","计算类型"],handleExpandAll:this.handleExpandAll,rightBtns:[{text:"添加",icon:"el-icon-circle-plus",cb:this.handleAdd},{text:"编辑",icon:"el-icon-edit",cb:this.handleEdit},{text:"删除",icon:"el-icon-delete",cb:this.handleDelete}]},table:{dataList:[],handleSelectRow:this.handleSelectRow,selectedRow:null,isLoading:!1,expandAll:!1,thead:[{text:"id",field:"id",hidden:!0},{text:"标签名称",field:"tag_cn",hidden:!1},{text:"标签分组",field:"tag_type_name",hidden:!1},{text:"标签类型",field:"tag_defineStr",hidden:!1},{text:"数据类型",field:"tag_db_defineStr",hidden:!1},{text:"计算类型",field:"run_flagStr",hidden:!1}]},pagination:{pageSizes:[10,25,50,100],pageSize:10,handleSizeChange:this.handleSizeChange,handleCurrentChange:this.handleCurrentChange,currentPage:1,total:0}}}},watch:{"pc.functions.checkList":function(e){h.a.each(this.pc.table.thead,function(t){var n=!1;h.a.each(e,function(e){t.text===e&&(t.hidden=!1,n=!0)}),n||(t.hidden=!0)})}},methods:{handleSearch:function(){this.loadData()},handleSizeChange:function(e){this.pc.search.form.limit=e,this.pc.search.form.offset=this.pc.search.form.limit*(this.pc.pagination.currentPage-1),this.loadData()},handleCurrentChange:function(e){this.pc.pagination.currentPage=e,this.pc.search.form.offset=this.pc.search.form.limit*(this.pc.pagination.currentPage-1),this.loadData()},handleSelectRow:function(e){this.pc.table.selectedRow=e,console.log(e)},handleExpandAll:function(){this.pc.table.expandAll=!this.pc.table.expandAll},handleAdd:function(){this.$router.push("/segment/customlabel-edit/0")},handleEdit:function(){null===this.pc.table.selectedRow?o.Message.error("请先选中表格中的某一记录！"):this.$router.push("/segment/customlabel-edit/"+this.pc.table.selectedRow.id)},handleDelete:function(){var e=this;null===this.pc.table.selectedRow?o.Message.error("请先选中表格中的某一记录！"):this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return(t=e.pc.table.selectedRow.id,Object(c.a)({url:"/segment/userDefined/delete",method:"post",data:t})).then(function(t){0===t.code&&e.$message({type:"success",message:"删除成功!"})});var t}).catch(function(t){e.$message({type:"error",message:t})})},loadData:function(){var e,t=this;return this.pc.table.isLoading=!0,(e=this.pc.search.form,Object(c.a)({url:"/segment/userDefined/query",method:"get",params:e})).then(function(e){console.log(e);var n=e;t.pc.table.dataList=Object(l.a)(n.rows),t.pc.pagination.total=n.total,t.pc.table.isLoading=!1}).catch(function(e){console.log(e),t.pc.table.isLoading=!1})},getOptions:function(){var e,t=this;return Object(c.a)({url:"/segment/userDefined/init",method:"get",params:e}).then(function(e){var n=e.data;t.pc.search.formConfig[1].options=n.tagTypeSelect,t.pc.search.formConfig[2].options=n.userDefinedTypeSelect,t.pc.search.formConfig[3].options=n.tagDbDefineSelect,t.pc.search.formConfig[4].options=n.ifTotalRunSelect}).catch(function(e){console.log(e)})},getBtns:function(){var e=this;return Object(s.a)(119).then(function(t){var n=t.data,a=h.a.clone(e.pc.functions.rightBtns);h.a.each(n,function(e){h.a.find(a,function(t){return t.text===e.name})||a.push({text:e.name,icon:e.icon,cb:function(){}})}),a=h.a.filter(a,function(e){return h.a.find(n,function(t){return e.text===t.name})}),e.pc.functions.rightBtns=a})}},mounted:function(){i.a.all([this.loadData(),this.getOptions(),this.getBtns()])}},u={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"customlabel-container"},[t("list-page",{attrs:{pc:this.pc}})],1)},staticRenderFns:[]};var p=n("vSla")(f,u,!1,function(e){n("vOf9")},"data-v-c793b3f6",null);t.default=p.exports},vOf9:function(e,t,n){var a=n("B7ww");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("8bSs")("d30d2ba0",a,!0)}});