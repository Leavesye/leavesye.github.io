webpackJsonp([32],{"93n9":function(t,e,n){var a=n("ILLU");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("8bSs")("0746d7e9",a,!0)},ILLU:function(t,e,n){(t.exports=n("BkJT")(!1)).push([t.i,"",""])},x9v0:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("rVsN"),i=n.n(a),c=n("vLgD");var o=n("dizt"),s=n("0xDb"),l=n("nFx2"),r=n("Y0Uy"),h=n.n(r),d={name:"task-list",components:{ListPage:l.a},data:function(){return{pc:{search:{form:{sort:"id",order:"desc",offset:0,limit:10,publicaccountid:"gh_7312247e930f",targetUserSource:"",sendType:"",menuId:323},layoutConfig:{xs:24,sm:12,md:6},formConfig:[{type:3,label:"目标用户来源",key:"targetUserSource"},{type:3,label:"发送类别",key:"sendType"}],btns:[{text:"搜索",cb:this.handleSearch}]},functions:{checkList:["目标用户来源","发送类别","筛选器ID","临时表名","微信模板定制ID","任务状态","任务备注"],handleExpandAll:this.handleExpandAll,rightBtns:[{text:"添加",icon:"el-icon-circle-plus",cb:this.handleAdd},{text:"编辑",icon:"el-icon-edit",cb:this.handleEdit},{text:"发送",icon:"el-icon-upload",cb:this.handleEdit}]},table:{dataList:[],handleSelectRow:this.handleSelectRow,selectedRow:null,isLoading:!1,expandAll:!1,thead:[{text:"目标用户来源",field:"targetUserSourceLabel",hidden:!1},{text:"发送类别",field:"sendTypeLabel",hidden:!1},{text:"筛选器ID",field:"seg_rulesetting_id",hidden:!1},{text:"临时表名",field:"tempTableName",hidden:!1},{text:"微信模板定制ID",field:"template_customize_id",hidden:!1},{text:"任务状态",field:"taskStatusLabel",hidden:!1},{text:"任务备注",field:"task_remark",hidden:!1}]},pagination:{pageSizes:[10,25,50,100],pageSize:10,handleSizeChange:this.handleSizeChange,handleCurrentChange:this.handleCurrentChange,currentPage:1,total:0}}}},watch:{"pc.functions.checkList":function(t){h.a.each(this.pc.table.thead,function(e){var n=!1;h.a.each(t,function(t){e.text===t&&(e.hidden=!1,n=!0)}),n||(e.hidden=!0)})}},methods:{handleSearch:function(){this.loadData()},handleSizeChange:function(t){this.pc.search.form.limit=t,this.pc.search.form.offset=this.pc.search.form.limit*(this.pc.pagination.currentPage-1),this.loadData()},handleCurrentChange:function(t){this.pc.pagination.currentPage=t,this.pc.search.form.offset=this.pc.search.form.limit*(this.pc.pagination.currentPage-1),this.loadData()},handleSelectRow:function(t){this.pc.table.selectedRow=t,console.log(t)},handleExpandAll:function(){this.pc.table.expandAll=!this.pc.table.expandAll},handleAdd:function(){this.$router.push("/member/member-edit")},handleEdit:function(){this.$router.push("/member/member-edit")},loadData:function(){var t,e=this;return this.pc.table.isLoading=!0,(t=this.pc.search.form,Object(c.a)({url:"/wmt/wechatTemplateTask/queryTemplateTasks",method:"get",params:t})).then(function(t){var n=t;console.log(n.rows),e.pc.table.dataList=Object(s.a)(n.rows),e.pc.pagination.total=n.total,e.pc.table.isLoading=!1}).catch(function(t){console.log(t),e.pc.table.isLoading=!1})},handleOutput:function(t,e){console.log(t,e)},getOptions:function(){var t=this;return initSelect().then(function(e){var n=e;t.pc.search.formConfig[0].options=n.targetUserSourceList,t.pc.search.formConfig[1].options=n.sendTypeList}).catch(function(t){console.log(t)})},getBtns:function(){var t=this;return Object(o.a)(323).then(function(e){var n=e.data,a=h.a.clone(t.pc.functions.rightBtns);h.a.each(n,function(t){h.a.find(a,function(e){return e.text===t.name})||a.push({text:t.name,icon:t.icon,cb:function(){}})}),a=h.a.filter(a,function(t){return h.a.find(n,function(e){return t.text===e.name})}),t.pc.functions.rightBtns=a})}},mounted:function(){i.a.all([this.loadData()],this.getOptions(),this.getBtns())}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"coupon-container"},[e("list-page",{attrs:{pc:this.pc}})],1)},staticRenderFns:[]};var p=n("vSla")(d,u,!1,function(t){n("93n9")},"data-v-490b037c",null);e.default=p.exports}});