webpackJsonp([30],{"5NPc":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("rVsN"),i=n.n(a),l=n("Y0Uy"),o=n.n(l),c=(n("5VXh"),n("0j9R")),d=n("R2oU"),s=n("iMIs"),r=n("vLgD");var m={sort:"id",order:"desc",offset:0,limit:10};var p={},h={name:"member-detail",components:{CommonForm:c.a,FuncButtons:d.a,ArvatoTable:s.a},data:function(){return{isLoading:!1,pc:{functions:{checkList:[]},table:{dataList:[],thead:[]},pagination:{isShow:!1}},panes:[{label:"会员详情",icon:"el-icon-date",type:1},{label:"消费记录",icon:"el-icon-date",type:2},{label:"积分历史",icon:"el-icon-date",type:2},{label:"优惠券历史",icon:"el-icon-date",type:2},{label:"积分兑换",icon:"el-icon-date",type:2},{label:"沟通历史",icon:"el-icon-date",type:2}],form:{name:"",memberCode:"",sex:"",birthday:"",mobile:"",mail:"",wechat:"",address:"虹口区飞虹路755弄5号1201",channel:"",type:"会员"},formConfig:[{type:1,label:"会员姓名",key:"name"},{type:1,label:"会员卡号",key:"memberCode"},{type:1,label:"性别",key:"sex"},{type:1,label:"生日",key:"birthday"},{type:1,label:"手机",key:"mobile"},{type:1,label:"电子邮箱",key:"mail"},{type:1,label:"微信号",key:"wechat"},{type:1,label:"详细地址",key:"address"},{type:1,label:"入会渠道",key:"channel"},{type:1,label:"客户类型",key:"type"}],layoutConfig:{xs:24,sm:24,md:24}}},methods:{handleTabClick:function(e){switch(e.index){case"1":this.pc.table.dataList=p[1].rows,this.pc.table.thead=[{text:"交易单号",field:"trade_no",hidden:!1},{text:"交易门店",field:"store",hidden:!1},{text:"交易时间",field:"trade_time",hidden:!1},{text:"交易金额",field:"trade_price",hidden:!1},{text:"产品件数",field:"product_count",hidden:!1},{text:"优惠金额",field:"discount_price",hidden:!1}];break;case"2":this.pc.table.dataList=p[2].rows,this.pc.table.thead=[{text:"积分",field:"trade_no",hidden:!1},{text:"积分类型",field:"store",hidden:!1},{text:"积分开始日期",field:"trade_time",hidden:!1},{text:"积分结束日期",field:"trade_price",hidden:!1},{text:"积分来源",field:"product_count",hidden:!1}];break;case"3":this.pc.table.dataList=p[3].rows,this.pc.table.thead=[{text:"优惠券",field:"trade_no",hidden:!1},{text:"券码",field:"store",hidden:!1},{text:"有效开始日期",field:"trade_time",hidden:!1},{text:"有效结束日期",field:"trade_price",hidden:!1},{text:"状态",field:"product_count",hidden:!1}];break;case"4":this.pc.table.dataList=[{id:1,exchange_time:"2016-10-5",exchange_type:"积分兑换",exchange_product:"精美礼品",exchange_num:"2076",exchange_channel:"线上"},{id:2,exchange_time:"2017-10-5",exchange_type:"积分兑换",exchange_product:"精美礼品",exchange_num:"2605",exchange_channel:"线上"}],this.pc.table.thead=[{text:"兑换时间",field:"exchange_time",hidden:!1},{text:"兑换类型",field:"exchange_type",hidden:!1},{text:"兑换商品/服务",field:"exchange_product",hidden:!1},{text:"兑换使用积分值",field:"exchange_num",hidden:!1},{text:"兑换渠道",field:"exchange_channel",hidden:!1}];break;case"5":this.pc.table.dataList=[{id:1,comm_time:"2016-10-05",comm_type:"活动邀约",comm_content_type:"提醒",comm_content:"国庆活动邀约",comm_channel:"短信",comm_result:"",comm_campaign:"国庆活动"},{id:2,comm_time:"2017-10-05",comm_type:"活动邀约",comm_content_type:"提醒",comm_content:"国庆活动邀约",comm_channel:"短信",comm_result:"",comm_campaign:"国庆活动"}],this.pc.table.thead=[{text:"沟通时间",field:"comm_time",hidden:!1},{text:"沟通类型",field:"comm_type",hidden:!1},{text:"内容类型",field:"comm_content_type",hidden:!1},{text:"沟通内容",field:"comm_content",hidden:!1},{text:"沟通渠道",field:"comm_channel",hidden:!1},{text:"反馈结果",field:"comm_result",hidden:!1},{text:"关联活动",field:"comm_campaign",hidden:!1}]}this.pc.functions.checkList=o.a.map(this.pc.table.thead,function(e){return e.text})}},mounted:function(){var e=this;this.isLoading=!0;var t=this.$route.params.id;i.a.all([function(e){return Object(r.a)({url:"/member/member/360/"+e,method:"get"})}(t),function(e){return Object(r.a)({url:"/member/member/360Order/"+e,method:"get",params:m})}(t),function(e){return Object(r.a)({url:"/member/member/360Point/"+e,method:"get",params:m})}(t),function(e){return Object(r.a)({url:"/member/member/360Coupon/"+e,method:"get",params:m})}(t)]).then(function(t){p=t;var n=t[0].data.memberInfo;e.form.name=n.name,e.form.memberCode=n.memberCode;var a=o.a.find(t[0].data.genderSelect,function(e){return e.value==n.sex});e.form.sex=a?a.text:"",e.form.mobile=n.mobile,e.form.mail=n.mail,e.form.channel=n.mail;var i=o.a.find(t[0].data.channelSelect,function(e){return e.value==n.channel});e.form.channel=i?i.text:"",e.isLoading=!1}).catch(function(){e.isLoading=!1})},watch:{"pc.functions.checkList":function(e){o.a.each(this.pc.table.thead,function(t){var n=!1;o.a.each(e,function(e){t.text==e&&(t.hidden=!1,n=!0)}),n||(t.hidden=!0)})}}},b={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"member-detail",attrs:{"element-loading-text":"拼命加载中"}},[n("el-row",{staticClass:"content-box",attrs:{gutter:10}},[n("el-col",{staticClass:"content-l",attrs:{sm:24,md:6,xs:24}},[n("el-row",{staticClass:"content-l-title"},[e._v("基础信息")]),e._v(" "),n("el-form",{ref:"form",staticClass:"content-l-form",attrs:{model:e.form,"label-width":"80px",disabled:"","label-position":"top"}},[n("common-form",{attrs:{formConfig:e.formConfig,layoutConfig:e.layoutConfig,form:e.form}})],1)],1),e._v(" "),n("el-col",{staticClass:"content-r",attrs:{sm:24,md:18,xs:24}},[n("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleTabClick}},e._l(e.panes,function(t){return n("el-tab-pane",{key:t.label},[n("span",{attrs:{slot:"label"},slot:"label"},[n("i",{staticClass:"el-icon-date"}),e._v("\n            "+e._s(t.label)+"\n          ")]),e._v(" "),1==t.type?n("div",[e._l([1,2,3,4],function(t,a){return n("el-row",{key:"a"+a,staticClass:"list-item",attrs:{type:"flex",justify:"space-between"}},[n("el-col",{staticClass:"list-item-col",attrs:{span:12}},[n("span",[e._v("VIP卡号：")]),e._v(" "),n("span",[e._v("20180223228607")])]),e._v(" "),n("el-col",{staticClass:"list-item-col",attrs:{span:12}},[n("span",[e._v("VIP卡号：")]),e._v(" "),n("span",[e._v("20180223228607")])])],1)}),e._v(" "),n("el-row",{staticClass:"common-label"},[e._v("交易标签")]),e._v(" "),e._l([1,2,3,4],function(t,a){return n("el-row",{key:"b"+a,staticClass:"list-item",attrs:{type:"flex",justify:"space-between"}},[n("el-col",{staticClass:"list-item-col",attrs:{span:12}},[n("span",[e._v("VIP卡号：")]),e._v(" "),n("span",[e._v("20180223228607")])]),e._v(" "),n("el-col",{staticClass:"list-item-col",attrs:{span:12}},[n("span",[e._v("VIP卡号：")]),e._v(" "),n("span",[e._v("20180223228607")])])],1)}),e._v(" "),n("el-row",{staticClass:"common-label"},[e._v("忠诚度标签")]),e._v(" "),e._l([1,2,3,4],function(t,a){return n("el-row",{key:"c"+a,staticClass:"list-item",attrs:{type:"flex",justify:"space-between"}},[n("el-col",{staticClass:"list-item-col",attrs:{span:12}},[n("span",[e._v("VIP卡号：")]),e._v(" "),n("span",[e._v("20180223228607")])]),e._v(" "),n("el-col",{staticClass:"list-item-col",attrs:{span:12}},[n("span",[e._v("VIP卡号：")]),e._v(" "),n("span",[e._v("20180223228607")])])],1)})],2):e._e(),e._v(" "),2==t.type?n("div",[n("func-buttons",{attrs:{pcFun:e.pc.functions,pcTable:e.pc.table}}),e._v(" "),n("arvato-table",{attrs:{pcTable:e.pc.table,pagination:e.pc.pagination}})],1):e._e()])}))],1)],1)],1)},staticRenderFns:[]};var f=n("vSla")(h,b,!1,function(e){n("BISi")},null,null);t.default=f.exports},BISi:function(e,t,n){var a=n("qUFi");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("8bSs")("05e23157",a,!0)},qUFi:function(e,t,n){(e.exports=n("BkJT")(!1)).push([e.i,"\n.member-detail {\n  background: #f5f7fa;\n}\n.member-detail .content-box {\n    padding: 15px 15px 0 15px;\n}\n.member-detail .content-box .content-l {\n      border-top: 5px solid #409eff;\n      border-radius: 5px;\n      background: #fff;\n}\n.member-detail .content-box .content-l .content-l-title {\n        height: 50px;\n        line-height: 50px;\n        font-size: 20px;\n        border-bottom: 1px solid #f4f4f4;\n        padding-left: 10px;\n}\n.member-detail .content-box .content-l .content-l-form {\n        padding: 0 10px 10px 10px;\n}\n.member-detail .content-box .content-l .content-l-form .el-form-item {\n          margin-bottom: 0;\n}\n.member-detail .content-box .content-l .content-l-form .el-form-item__label {\n          padding: 0 0 0px;\n}\n.member-detail .content-box .content-r .list-item {\n      height: 40px;\n      line-height: 40px;\n      border-top: 1px solid #ededed;\n}\n.member-detail .content-box .content-r .list-item .list-item-col {\n        text-align: center;\n}\n.member-detail .content-box .content-r .list-item .list-item-col > span:nth-child(1) {\n          font-weight: 600;\n}\n.member-detail .content-box .content-r .common-label {\n      height: 40px;\n      line-height: 40px;\n      padding-left: 10px;\n      font-size: 20px;\n      font-weight: 600;\n      background: #eee;\n      margin: 10px 0;\n}\n",""])}});