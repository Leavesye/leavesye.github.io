webpackJsonp([23],{CAX8:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("rVsN"),i=n.n(a),c=n("XUE3"),s=n("dizt"),o=n("0xDb"),h=n("nFx2"),r=n("Y0Uy"),l=n.n(r),d={name:"customlabel-list",components:{ListPage:h.a},data:function(){return{pc:{search:{form:{batchTag:"",batchDesc:"",batchStatus:"",sort:"id",order:"desc",offset:0,limit:10,menuId:119},layoutConfig:{xs:24,sm:12,md:6},formConfig:[{type:1,label:"标签名称",key:"batchTag"},{type:3,label:"打标群组类型",key:"batchDesc",options:[]},{type:3,label:"选择状态",key:"batchStatus",options:[]}],btns:[{text:"搜索",cb:this.handleSearch}]},functions:{checkList:["标签名称","描述","打标群组类型","状态","人数"],handleExpandAll:this.handleExpandAll,rightBtns:[{text:"添加",icon:"el-icon-circle-plus",cb:this.handleAdd},{text:"编辑",icon:"el-icon-edit",cb:this.handleEdit},{text:"删除",icon:"el-icon-delete",cb:this.handleDelete}]},table:{dataList:[],handleSelectRow:this.handleSelectRow,selectedRow:null,isLoading:!1,expandAll:!1,thead:[{text:"批量打标ID",field:"batch_id",hidden:!0},{text:"标签名称",field:"batch_tag",hidden:!1},{text:"描述",field:"batch_desc",hidden:!1},{text:"打标群组类型",field:"batch_type",hidden:!1},{text:"状态",field:"batch_status",hidden:!1},{text:"人数",field:"member_count",hidden:!1}]},pagination:{pageSizes:[10,25,50,100],pageSize:10,handleSizeChange:this.handleSizeChange,handleCurrentChange:this.handleCurrentChange,currentPage:1,total:0}}}},watch:{"pc.functions.checkList":function(t){l.a.each(this.pc.table.thead,function(e){var n=!1;l.a.each(t,function(t){e.text===t&&(e.hidden=!1,n=!0)}),n||(e.hidden=!0)})}},methods:{handleSearch:function(){this.loadData()},handleSizeChange:function(t){this.pc.search.form.limit=t,this.pc.search.form.offset=this.pc.search.form.limit*(this.pc.pagination.currentPage-1),this.loadData()},handleCurrentChange:function(t){this.pc.pagination.currentPage=t,this.pc.search.form.offset=this.pc.search.form.limit*(this.pc.pagination.currentPage-1),this.loadData()},handleSelectRow:function(t){this.pc.table.selectedRow=t,console.log(t)},handleExpandAll:function(){this.pc.table.expandAll=!this.pc.table.expandAll},handleAdd:function(){this.$router.push("/segment/batchtag-edit/0")},handleEdit:function(){this.$router.push("/segment/batchtag-edit/"+this.pc.table.selectedRow.id)},handleDelete:function(){var t=this;this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return Object(c.b)(t.pc.table.selectedRow.id).then(function(e){0===e.code&&t.$message({type:"success",message:"删除成功!"})})}).catch(function(e){t.$message({type:"error",message:e})})},loadData:function(){var t=this;return this.pc.table.isLoading=!0,Object(c.e)(this.pc.search.form).then(function(e){console.log(e);var n=e;t.pc.table.dataList=Object(o.a)(n.rows),t.pc.pagination.total=n.total,t.pc.table.isLoading=!1}).catch(function(e){console.log(e),t.pc.table.isLoading=!1})},getOptions:function(){var t=this;return Object(c.f)().then(function(e){var n=e;t.pc.search.formConfig[1].options=n.batchTagTypeList,t.pc.search.formConfig[2].options=n.batchTagStatusList}).catch(function(t){console.log(t)})},getBtns:function(){var t=this;return Object(s.a)(119).then(function(e){var n=e.data,a=l.a.clone(t.pc.functions.rightBtns);l.a.each(n,function(t){l.a.find(a,function(e){return e.text===t.name})||a.push({text:t.name,icon:t.icon,cb:function(){}})}),a=l.a.filter(a,function(t){return l.a.find(n,function(e){return t.text===e.name})}),t.pc.functions.rightBtns=a})}},mounted:function(){i.a.all([this.loadData(),this.getOptions(),this.getBtns()])}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"customlabel-container"},[e("list-page",{attrs:{pc:this.pc}})],1)},staticRenderFns:[]};var f=n("vSla")(d,u,!1,function(t){n("JydJ")},"data-v-70a8b203",null);e.default=f.exports},JydJ:function(t,e,n){var a=n("UQs6");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("8bSs")("c1e51c88",a,!0)},UQs6:function(t,e,n){(t.exports=n("BkJT")(!1)).push([t.i,"",""])},XUE3:function(t,e,n){"use strict";e.e=function(t){return Object(a.a)({url:"/segment/batchTag/list.json",method:"get",params:t})},e.f=function(t){return Object(a.a)({url:"/segment/batchTag/init",method:"get",params:t})},e.d=function(t){return Object(a.a)({url:"/segment/batchTag/init",method:"post",data:t})},e.c=function(t){return Object(a.a)({url:"/segment/batchTag/getBatchTagUploadById",method:"get",params:t})},e.a=function(t){return Object(a.a)({url:"/member/member/save",method:"post",data:t})},e.g=function(t){return Object(a.a)({url:"/member/member/update",method:"post",data:t})},e.b=function(t){return Object(a.a)({url:"/segment/segment/delete",method:"post",data:t})};var a=n("vLgD")}});