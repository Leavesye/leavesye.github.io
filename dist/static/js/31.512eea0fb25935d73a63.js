webpackJsonp([31],{"4Qt7":function(t,e,n){var a=n("WWOz");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("8bSs")("44ee7580",a,!0)},WWOz:function(t,e,n){(t.exports=n("BkJT")(!1)).push([t.i,"",""])},"hJg+":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("rVsN"),i=n.n(a),c=n("vLgD");var s=n("0xDb"),o=n("nFx2"),l=n("Y0Uy"),d=n.n(l),h={name:"activity-setting",components:{ListPage:o.a},data:function(){return{pc:{search:{form:{campaign_name:"",campaign_type:"",start_date:"",end_date:"",status_code:"",test_status:"",sort:"id",order:"desc",offset:0,limit:10,menuId:32},layoutConfig:{xs:24,sm:12,md:8},formConfig:[{type:1,label:"活动名称",key:"campaignName"},{type:3,label:"活动类型",key:"campaignType",options:[]},{type:3,label:"状态",key:"campaignStatus",options:[]},{type:3,label:"测试状态",key:"camTestStatus",options:[]},{type:4,label:"开始日期",key:"startDate"},{type:4,label:"结束日期",key:"endDate"}],btns:[{text:"搜索",cb:this.handleSearch}]},functions:{checkList:["活动名称","活动类型","开始时间","结束时间","创建时间","活动状态","活动测试状态"],handleExpandAll:this.handleExpandAll,rightBtns:[{text:"添加",icon:"el-icon-circle-plus",cb:this.handleAdd},{text:"编辑",icon:"el-icon-edit",cb:this.handleEdit},{text:"提交审核",icon:"el-icon-tickets",cb:this.handleTurnToDetail},{text:"删除",icon:"el-icon-delete",cb:this.handleDelete},{text:"执行",icon:"el-icon-tickets",cb:this.handleTurnToDetail},{text:"测试",icon:"el-icon-tickets",cb:this.handleTurnToDetail},{text:"导出",icon:"el-icon-tickets",cb:this.handleTurnToDetail}]},table:{dataList:[],handleSelectRow:this.handleSelectRow,selectedRow:null,isLoading:!1,expandAll:!1,thead:[{text:"活动ID",field:"campaign_id",hidden:!0},{text:"状态code",field:"status_code",hidden:!0},{text:"测试状态code",field:"test_status",hidden:!0},{text:"活动名称",field:"campaign_name",hidden:!1},{text:"活动类型",field:"campaign_type",hidden:!1},{text:"开始时间",field:"start_date",hidden:!1},{text:"结束时间",field:"end_date",hidden:!1},{text:"创建时间",field:"create_date",hidden:!1},{text:"活动状态",field:"status",hidden:!1},{text:"活动测试状态",field:"testStatus",hidden:!1}]},pagination:{pageSizes:[10,25,50,100],pageSize:10,handleSizeChange:this.handleSizeChange,handleCurrentChange:this.handleCurrentChange,currentPage:1,total:0}}}},watch:{"pc.functions.checkList":function(t){d.a.each(this.pc.table.thead,function(e){var n=!1;d.a.each(t,function(t){e.text==t&&(e.hidden=!1,n=!0)}),n||(e.hidden=!0)})}},methods:{handleSearch:function(){this.loadData()},handleSizeChange:function(t){this.pc.search.form.limit=t,this.pc.search.form.offset=this.pc.search.form.limit*(this.pc.pagination.currentPage-1),this.loadData()},handleCurrentChange:function(t){this.pc.pagination.currentPage=t,this.pc.search.form.offset=this.pc.search.form.limit*(this.pc.pagination.currentPage-1),this.loadData()},handleSelectRow:function(t){this.pc.table.selectedRow=t},handleExpandAll:function(){this.pc.table.expandAll=!this.pc.table.expandAll},handleAdd:function(){this.$router.push("/active/active-edit/0")},handleEdit:function(){if(!this.pc.table.selectedRow)return this.$message({type:"warning",message:"请先选中表格中的某一记录！"}),!1;this.$router.push("/active/active-edit/"+this.pc.table.selectedRow.id)},handleDelete:function(){var t=this;if(!this.pc.table.selectedRow)return this.$message({type:"warning",message:"请先选中表格中的某一记录！"}),!1;this.$confirm("确定要删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){del({memberId:t.pc.table.selectedRow.id}).then(function(){t.loadData(),t.$message({type:"success",message:"删除成功!"})})}).catch(function(){})},loadData:function(){var t,e=this;return this.pc.table.isLoading=!0,(t=this.pc.search.form,Object(c.a)({url:"/campaign/campaign/list",method:"get",params:t})).then(function(t){var n=t;e.pc.table.dataList=Object(s.a)(n.rows),e.pc.pagination.total=n.total,e.pc.table.isLoading=!1}).catch(function(t){console.log(t),e.pc.table.isLoading=!1})},getOptions:function(){var t,e=this;return Object(c.a)({url:"/campaign/campaign/init",method:"get",params:t}).then(function(t){var n=t;e.pc.search.formConfig[1].options=n.campaignTypeList,e.pc.search.formConfig[2].options=n.campaignStatusList,e.pc.search.formConfig[3].options=n.camTestStatusList}).catch(function(t){console.log(t)})},getBtns:function(){var t=this;return Object(c.a)({url:"/admin/menu/system/permission/buttons/32",method:"get"}).then(function(e){var n=e.data,a=d.a.clone(t.pc.functions.rightBtns);d.a.each(n,function(t){d.a.find(a,function(e){return e.text===t.name})||a.push({text:t.name,icon:t.icon,cb:function(){}})}),a=d.a.filter(a,function(t){return d.a.find(n,function(e){return t.text==e.name})}),t.pc.functions.rightBtns=a})}},mounted:function(){i.a.all([this.loadData(),this.getOptions(),this.getBtns()])}},r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"member-container"},[e("list-page",{attrs:{pc:this.pc}})],1)},staticRenderFns:[]};var p=n("vSla")(h,r,!1,function(t){n("4Qt7")},"data-v-7447e6d2",null);e.default=p.exports}});